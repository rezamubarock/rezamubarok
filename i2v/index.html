<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AZERA // IMAGE TO VIDEO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=VT323&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --terminal-green: #0f0;
            --terminal-dim: #003300;
            --bg-color: #050505;
            --scanline: rgba(0, 255, 0, 0.1);
        }

        body {
            background-color: var(--bg-color);
            color: var(--terminal-green);
            font-family: 'Share Tech Mono', monospace;
            overflow-x: hidden;
            background-image: radial-gradient(circle at 50% 50%, #111 0%, #000 100%);
            padding-bottom: 3rem; /* Add padding for ticker */
        }

        /* CRT Scanline Effect */
        .scanlines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.2));
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 50;
        }

        .glow-text {
            text-shadow: 0 0 5px var(--terminal-green), 0 0 10px var(--terminal-green);
        }

        .border-hacker {
            border: 1px solid var(--terminal-green);
            box-shadow: 0 0 5px var(--terminal-dim);
        }

        .input-hacker {
            background: #000;
            border: 1px solid var(--terminal-green);
            color: var(--terminal-green);
            font-family: 'VT323', monospace;
            font-size: 1.2rem;
        }
        
        .input-hacker:focus {
            outline: none;
            box-shadow: 0 0 10px var(--terminal-green);
        }

        /* Glitch Animation */
        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }

        .glitch-hover:hover {
            animation: glitch 0.2s infinite;
            background-color: var(--terminal-green);
            color: black;
            cursor: pointer;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #000;
        }
        ::-webkit-scrollbar-thumb {
            background: var(--terminal-dim);
            border: 1px solid var(--terminal-green);
        }

        /* Loader */
        .loader {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid var(--terminal-green);
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Ticker Styles */
        .ticker-wrap {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            overflow: hidden;
            height: 2.5rem;
            background-color: rgba(0, 10, 0, 0.95);
            border-top: 1px solid var(--terminal-green);
            white-space: nowrap;
            z-index: 100;
            display: flex;
            align-items: center;
        }

        .ticker {
            display: inline-block;
            animation: ticker 30s linear infinite;
            font-family: 'VT323', monospace;
            font-size: 1.4rem;
            color: var(--terminal-green);
            text-shadow: 0 0 2px var(--terminal-green);
            padding-left: 100%; /* Start off-screen */
        }

        @keyframes ticker {
            0% { transform: translate3d(0, 0, 0); }
            100% { transform: translate3d(-100%, 0, 0); }
        }
    </style>
</head>
<body class="min-h-screen p-4 md:p-8 selection:bg-green-900 selection:text-white">

    <div class="scanlines"></div>

    <!-- Header -->
    <header class="max-w-6xl mx-auto mb-8 border-b border-green-900 pb-4 flex flex-col md:flex-row justify-between items-center gap-4">
        <div>
            <h1 class="text-4xl md:text-6xl font-bold glow-text tracking-widest" style="font-family: 'VT323';">AZERA</h1>
            <p class="text-xs md:text-sm opacity-70">V.2.0.5 // IMAGE_TO_VIDEO_GENERATOR_MODULE</p>
        </div>
        <div class="flex items-center gap-2">
            <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
            <span class="text-sm">SYSTEM ONLINE</span>
        </div>
    </header>

    <main class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8 relative z-10 mb-12">
        
        <!-- Left Column: Config & Input -->
        <div class="lg:col-span-4 space-y-6">
            
            <!-- API Key Section -->
            <div class="border-hacker p-4 bg-black bg-opacity-80">
                <label class="block text-xs mb-2 uppercase tracking-wider">[ SECURE_ACCESS_TOKEN // GEMINI_API ]</label>
                <input type="password" id="apiKey" placeholder="Enter Gemini API Key..." class="input-hacker w-full p-2" autocomplete="off">
                <p class="text-[10px] mt-2 text-green-700">Your key is stored locally in session memory only.</p>
            </div>

            <!-- Image Upload -->
            <div class="border-hacker p-4 bg-black bg-opacity-80 relative group">
                <label class="block text-xs mb-2 uppercase tracking-wider">[ UPLOAD_TARGET_IMAGE ]</label>
                <div id="dropZone" class="border-2 border-dashed border-green-900 hover:border-green-500 h-48 flex flex-col items-center justify-center cursor-pointer transition-colors">
                    <p class="text-center px-4" id="dropText">DRAG DATA HERE OR CLICK TO INJECT</p>
                    <input type="file" id="imageInput" accept="image/*" class="hidden">
                    <img id="previewImage" class="hidden w-full h-full object-cover opacity-80" />
                </div>
            </div>

            <!-- Controls -->
            <div class="border-hacker p-4 bg-black bg-opacity-80 space-y-4">
                <div class="text-xs uppercase border-b border-green-900 pb-1 mb-2">[ PARAMETER_CONFIGURATION ]</div>
                
                <!-- Camera Motion -->
                <div>
                    <label class="block text-xs mb-1">CAMERA_MOTION</label>
                    <select id="cameraMotion" class="input-hacker w-full p-1 text-sm">
                        <option value="Static, subtle movement">Static / Subtle</option>
                        <option value="Slow Zoom In">Slow Zoom In</option>
                        <option value="Quick Zoom Out">Quick Zoom Out</option>
                        <option value="Pan Right to Left">Pan Right</option>
                        <option value="Pan Left to Right">Pan Left</option>
                        <option value="Cinematic Orbit">Cinematic Orbit</option>
                        <option value="Handheld Shake">Handheld / Chaotic</option>
                        <option value="FPV Drone Shot">FPV Drone</option>
                    </select>
                </div>

                <!-- Character Action -->
                <div>
                    <label class="block text-xs mb-1">SUBJECT_ACTION</label>
                    <input type="text" id="charAction" placeholder="e.g. Waving, Running, Smiling" class="input-hacker w-full p-1 text-sm">
                </div>

                 <!-- Atmosphere -->
                 <div>
                    <label class="block text-xs mb-1">STYLE_&_ATMOSPHERE</label>
                    <select id="stylePreset" class="input-hacker w-full p-1 text-sm">
                        <option value="Cinematic, Realistic, 8k">Cinematic Realistic</option>
                        <option value="Anime Style, Studio Ghibli">Anime / 2D</option>
                        <option value="Cyberpunk, Neon Lights">Cyberpunk</option>
                        <option value="Dark Fantasy, Gloomy">Dark Fantasy</option>
                        <option value="Vintage 90s VHS">VHS / Retro</option>
                        <option value="3D Render, Pixar Style">3D Animation</option>
                    </select>
                </div>

                 <!-- Motion Strength -->
                 <div>
                    <label class="block text-xs mb-1">MOTION_STRENGTH (1-10)</label>
                    <input type="range" id="motionStrength" min="1" max="10" value="5" class="w-full accent-green-500 h-1 bg-green-900 rounded-lg appearance-none cursor-pointer">
                    <div class="flex justify-between text-[10px] opacity-70">
                        <span>LOW</span>
                        <span id="strengthVal">5</span>
                        <span>HIGH</span>
                    </div>
                </div>
            </div>

            <button id="generateBtn" class="w-full border-hacker bg-green-900 text-black font-bold py-3 text-lg hover:bg-green-500 transition-all uppercase tracking-widest glitch-hover">
                [ EXECUTE_PROTOCOL ]
            </button>

        </div>

        <!-- Right Column: Terminal Output -->
        <div class="lg:col-span-8 flex flex-col gap-6 h-full">
            
            <!-- Terminal Log Window -->
            <div class="border-hacker bg-black p-4 flex-grow flex flex-col min-h-[300px] relative overflow-hidden">
                <div class="absolute top-2 right-2 text-[10px] border border-green-900 px-2">TERMINAL_OUTPUT_LOG</div>
                
                <div id="terminalLog" class="font-mono text-sm space-y-1 overflow-y-auto flex-grow max-h-[400px] pb-4">
                    <div class="opacity-50">> SYSTEM_READY...</div>
                    <div class="opacity-50">> WAITING_FOR_INPUT...</div>
                </div>

                <!-- Loading Indicator (Hidden by default) -->
                <div id="processingBar" class="hidden mt-4">
                    <div class="text-xs mb-1 flex justify-between">
                        <span>PROCESSING...</span>
                        <span id="percent">0%</span>
                    </div>
                    <div class="w-full h-2 bg-green-900">
                        <div id="progressBar" class="h-full bg-green-500 w-0 transition-all duration-300"></div>
                    </div>
                </div>
            </div>

            <!-- Final Result Area -->
            <div class="border-hacker p-4 bg-green-900 bg-opacity-10">
                <div class="flex justify-between items-center mb-2">
                    <label class="text-xs uppercase tracking-wider">[ GENERATED_PROMPT_PAYLOAD ]</label>
                    <button id="copyBtn" class="text-xs border border-green-500 px-2 py-1 hover:bg-green-500 hover:text-black transition-colors">
                        COPY_TO_CLIPBOARD
                    </button>
                </div>
                <textarea id="resultArea" readonly class="w-full h-32 bg-black border border-green-800 p-3 text-sm font-mono text-green-400 focus:outline-none resize-none" placeholder="// OUTPUT WILL APPEAR HERE..."></textarea>
            </div>

        </div>

    </main>

    <!-- Running Text Ticker -->
    <div class="ticker-wrap">
        <div class="ticker">
           Senajan jaman wis serba 'AI' lan canggih, nanging tata krama lan unggah-ungguh tetep ora iso didownload.
        </div>
    </div>

    <script>
        // --- DOM ELEMENTS ---
        const dropZone = document.getElementById('dropZone');
        const imageInput = document.getElementById('imageInput');
        const previewImage = document.getElementById('previewImage');
        const dropText = document.getElementById('dropText');
        const generateBtn = document.getElementById('generateBtn');
        const terminalLog = document.getElementById('terminalLog');
        const resultArea = document.getElementById('resultArea');
        const progressBar = document.getElementById('progressBar');
        const processingBar = document.getElementById('processingBar');
        const percentDisplay = document.getElementById('percent');
        const copyBtn = document.getElementById('copyBtn');
        const strengthSlider = document.getElementById('motionStrength');
        const strengthVal = document.getElementById('strengthVal');

        let selectedImageBase64 = null;

        // --- UTILITIES ---
        const log = (msg, type = 'info') => {
            const div = document.createElement('div');
            const timestamp = new Date().toLocaleTimeString('en-US', { hour12: false });
            div.innerHTML = `<span class="opacity-50">[${timestamp}]</span> > ${msg}`;
            if (type === 'error') div.style.color = '#ff3333';
            if (type === 'success') div.style.color = '#ccffcc';
            terminalLog.appendChild(div);
            terminalLog.scrollTop = terminalLog.scrollHeight;
        };

        const typeWriter = (text, element) => {
            let i = 0;
            element.value = "";
            const speed = 10; 
            function type() {
                if (i < text.length) {
                    element.value += text.charAt(i);
                    i++;
                    setTimeout(type, speed);
                }
            }
            type();
        };

        // --- EVENT LISTENERS ---
        
        // Slider
        strengthSlider.addEventListener('input', (e) => {
            strengthVal.innerText = e.target.value;
        });

        // Drag & Drop Logic
        dropZone.addEventListener('click', () => imageInput.click());
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('border-green-500');
            dropZone.classList.add('bg-green-900');
            dropZone.classList.add('bg-opacity-20');
        });
        dropZone.addEventListener('dragleave', () => {
            dropZone.classList.remove('border-green-500');
            dropZone.classList.remove('bg-green-900');
            dropZone.classList.remove('bg-opacity-20');
        });
        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('border-green-500');
            dropZone.classList.remove('bg-green-900');
            dropZone.classList.remove('bg-opacity-20');
            const file = e.dataTransfer.files[0];
            handleFile(file);
        });
        imageInput.addEventListener('change', (e) => {
            handleFile(e.target.files[0]);
        });

        function handleFile(file) {
            if (!file) return;
            if (!file.type.startsWith('image/')) {
                log('ERROR: INVALID_FILE_TYPE DETECTED', 'error');
                return;
            }

            log(`LOADING_IMAGE: ${file.name}...`);
            
            const reader = new FileReader();
            reader.onload = (e) => {
                selectedImageBase64 = e.target.result;
                previewImage.src = selectedImageBase64;
                previewImage.classList.remove('hidden');
                dropText.classList.add('hidden');
                log('IMAGE_DATA_ENCODED_SUCCESSFULLY', 'success');
            };
            reader.readAsDataURL(file);
        }

        // Copy Button
        copyBtn.addEventListener('click', () => {
            resultArea.select();
            document.execCommand('copy');
            const originalText = copyBtn.innerText;
            copyBtn.innerText = "COPIED!";
            copyBtn.classList.add('bg-green-500', 'text-black');
            setTimeout(() => {
                copyBtn.innerText = originalText;
                copyBtn.classList.remove('bg-green-500', 'text-black');
            }, 2000);
        });

        // --- MAIN LOGIC (GEMINI API) ---
        generateBtn.addEventListener('click', async () => {
            const apiKey = document.getElementById('apiKey').value;
            if (!apiKey) {
                log('CRITICAL ERROR: API_KEY_MISSING', 'error');
                alert("Please enter your Gemini API Key.");
                return;
            }
            if (!selectedImageBase64) {
                log('ERROR: NO_SOURCE_IMAGE', 'error');
                alert("Please upload an image first.");
                return;
            }

            // UI State Update
            generateBtn.disabled = true;
            generateBtn.innerText = "PROCESSING...";
            processingBar.classList.remove('hidden');
            resultArea.value = "";
            
            // Fake progress for UX
            let progress = 0;
            const interval = setInterval(() => {
                if (progress < 90) {
                    progress += Math.floor(Math.random() * 5);
                    if (progress > 90) progress = 90;
                    progressBar.style.width = `${progress}%`;
                    percentDisplay.innerText = `${progress}%`;
                }
            }, 500);

            try {
                log('INITIATING NEURAL HANDSHAKE...');
                
                // Gather Inputs
                const camera = document.getElementById('cameraMotion').value;
                const action = document.getElementById('charAction').value || "Natural subtle movement";
                const style = document.getElementById('stylePreset').value;
                const strength = strengthSlider.value;

                // Construct Prompt for Gemini
                const systemPrompt = `
                    You are an elite AI Video Prompt Engineer for advanced models like Kling AI, Runway Gen-3, and Luma. 
                    
                    YOUR TASK:
                    1. Analyze the image deeply to identify specific elements that should naturally move (e.g., fire, smoke, water, clouds, hair, loose fabric, blinking lights, dust particles).
                    2. Generate a high-quality video prompt.
                    3. CRITICAL: You must explicitly describe the movement of the environmental elements you found in step 1 (e.g., if you see fire, write "flames flickering aggressively"; if you see rain, write "heavy rain falling slanted").
                    
                    USER PARAMETERS:
                    - Camera: ${camera}
                    - Primary Subject Action: ${action}
                    - Style: ${style}
                    - Intensity: ${strength}/10

                    OUTPUT FORMAT (Plain text only, no markdown):
                    [Detailed visual description of the scene], [Primary action: ${action}], [Environmental Motion: Describe specifically how the background/elements detected in the image are moving], [Camera: ${camera}], [Style: ${style}, cinematic, 8k, high fidelity], Motion score: ${strength}.
                    
                    Make the prompt immersive and descriptive, ensuring both the subject and the environment are alive.
                `;

                log('ANALYZING PIXEL DATA...');
                
                // Prepare Base64 (remove header)
                const base64Data = selectedImageBase64.split(',')[1];

                // UPDATED TO GEMINI 2.0 FLASH
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [
                                { text: systemPrompt },
                                {
                                    inline_data: {
                                        mime_type: "image/jpeg", // Assuming jpeg/png
                                        data: base64Data
                                    }
                                }
                            ]
                        }]
                    })
                });

                clearInterval(interval);
                progressBar.style.width = '100%';
                percentDisplay.innerText = '100%';

                if (!response.ok) {
                    const errData = await response.json();
                    throw new Error(errData.error?.message || 'API Request Failed');
                }

                const data = await response.json();
                const generatedText = data.candidates[0].content.parts[0].text;

                log('GENERATION COMPLETE. PAYLOAD RECEIVED.', 'success');
                typeWriter(generatedText.trim(), resultArea);

            } catch (error) {
                clearInterval(interval);
                progressBar.style.width = '0%';
                percentDisplay.innerText = 'ERROR';
                log(`FATAL ERROR: ${error.message}`, 'error');
                console.error(error);
            } finally {
                generateBtn.disabled = false;
                generateBtn.innerText = "[ EXECUTE_PROTOCOL ]";
                setTimeout(() => processingBar.classList.add('hidden'), 2000);
            }
        });

        // Initial Log
        setTimeout(() => log('AZERA KERNEL LOADED...'), 500);
        setTimeout(() => log('CONNECTING TO SECURE SERVER...'), 1000);
        setTimeout(() => log('CONNECTION ESTABLISHED.'), 1500);
    </script>
</body>
</html><!DOCTYPE html>

